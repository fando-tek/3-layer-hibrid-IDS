![Praproses](https://github.com/fando-tek/Hybrid-learning-IDS/assets/81504312/cabeebd5-efd6-4e55-8751-149b4c62f722)
Gambar alur tahapan praproses data
## 1. Menggabungkan semua dataset CIC2018 menjadi 1 Dataset
Pada tahap ini, dilakukan penggabungan dataset menjadi satu dataset kemudian disimpan dalam format CSV. Setelah itu, dataset yang telah digabungkan di muat kembali untuk selanjutnya dilakukan tahapan praproses lainnya.
## 2. Praproses Data
Tahapan selanjutnya adalah praproses data. Praproses data melalui serangkaian tahapan seperti integrasi data, transformasi data, pembersihan data, dan pengambilan sampel data yang bertujuan untuk memperoleh dataset dalam bentuk yang dibutuhkan untuk membangun model. Gambar diatas menunjukkan alur tahapan praproses data yang digunakan dalam penelitian ini./
Tahapan pertama dalam praproses data adalah menggabungkan sepuluh file dataset menjadi satu file dataset dalam format CSV dan menghapus duplikat baris header yang memiliki nama yang sama. Nama fitur dalam dataset juga diubah menjadi huruf kecil yang dihubungkan dengan garis bawah (underscore) untuk memudahkan akses fitur dalam dataset. Protokol yang digunakan dalam penelitian ini adalah TCP dan UDP, sehingga nilai protokol selain 6 (TCP) dan 17 (UDP) dihapus dari dataset. Dataset yang digunakan juga mengandung nilai tak terhingga (infinity) dan nilai yang hilang, yang dapat disebabkan oleh kesalahan dalam menangkap (capture) data lalu lintas jaringan atau saat mengekstrak fitur [47]. Untuk menangani masalah ini, nilai infinity diubah menjadi NaN dan fitur (kolom) dihapus pada fitur yang memiliki nilai NaN lebih dari 50%, sedangkan sampel data (baris) dihapus pada fitur yang memiliki nilai NaN kurang dari 50%. Penghapusan fitur juga dilakukan pada fitur yang tidak memiliki variasi nilai dan salah satu fitur dihapus jika dua fitur memiliki distribusi nilai yang sama. Penghapusan fitur yang memiliki distribusi yang sama dilakukan dengan menghitung koefisien korelasi menggunakan pearson correlation coefficient antara kedua fitur. Jika kedua fitur memiliki koefisien korelasi sama dengan satu, maka salah satu fitur dihapus. Dalam pembangunan model hibrid, diperlukan label kelas biner untuk digunakan pada lapisan satu dan lapisan dua, sedangkan label pada dataset awal merupakan multi kelas. Oleh karena itu, dilakukan penambahan label baru ke dalam kelas biner dengan menetapkan label "benign" dan label "0" pada data normal, dan menetapkan label "attack" dan label "1" pada data serangan di setiap sampel data. Sehingga terdapat tiga pelabelan kelas target yang berbeda. Kelas biner digunakan pada lapisan satu dan lapisan dua, sedangkan multi kelas digunakan pada lapisan tiga. Dataset yang digunakan memiliki ketidakseimbangan kelas, sehingga dapat menyebabkan bias pada klasifikasi kelas target. Oleh karena itu, diperlukan teknik penyeimbangan kelas. Penyeimbangan kelas dilakukan dengan menggunakan pendekatan under sampling. Under sampling dilakukan hanya untuk menyeimbangkan data kelas normal terhadap kelas serangan, bukan untuk menyeimbangkan data antara kelas normal terhadap setiap kelas serangan. Under sampling dilakukan dengan menggunakan metode Nearmiss-2, yang memilih sampel dari kelas normal (benign) sehingga rasio antara kelas normal terhadap kelas serangan menjadi lebih seimbang. Dalam penelitian ini, diterapkan tiga rasio pengambilan sampel yang berbeda dan satu rasio tanpa pengambilan sampel (1:1, 2:1, 3:1, dan 4,79:1). Rasio 4,79:1 merupakan rasio ketidakseimbangan default tanpa under sampling antara kelas normal terhadap kelas serangan. Rasio 4,79:1 dibulatkan menjadi rasio 5:1 bertujuan untuk mendapatkan angka yang lebih sederhana dan mudah dipahami. Hal ini menunjukkan bahwa untuk setiap sampel dari kelas serangan, terdapat sekitar 5 sampel kelas normal.
